

<div class="container">
    <div class="box">

        <h1 class="page-header text-info lead ntm"><strong>NEW BOOK</strong></h1>

        <!--Edit or create book view-->
        <fieldset>

            <div class="row">
                <div class="col-md-12 form-group-sm">
                    <div class="pull-right">
                        <button type="button" class="btn btn-default btn-sm" ng-click="fx.back()">
                            <i class="fas fa-arrow-left"></i> back
                        </button>
                        <button type="button" class="btn btn-primary btn-sm" ng-click="fx.upsert()" form-submit="ui.formSubmit">
                            <i class="far fa-save"></i> save
                        </button>
                    </div>
                </div>
            </div>
            <form name="ui.formSubmit" novalidate>

                <div class="alert alert-danger" role="alert"
                     ng-if="ui.showValidation && !ui.formSubmit.$valid" id="errorHandlingSummary">
                    <span><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> <strong>Must be set fields to continue</strong></span>

                    <ul ng-messages="ui.formSubmit.txtTitle.$error" class="nbm">
                        <li ng-message="required">the title is required</li>
                    </ul>
                    <ul ng-messages="ui.formSubmit.txtDescription.$error" class="nbm">
                        <li ng-message="required">the description is required</li>
                    </ul>
                    <ul ng-messages="ui.formSubmit.txtYear.$error" class="nbm">
                        <li ng-message="required">the year is required</li>
                    </ul>
                </div>

                <fieldset>
                    <div class="well">
                        <h4>data author</h4>
                        <div class="row">
                            <div class="col-md-6 form-group-sm">
                                <div ng-class="{ 'has-error': ui.formSubmit.txtTitle.$touched && ui.formSubmit.txtTitle.$invalid }">
                                    <label>Title</label>
                                    <input type="text"
                                           class="form-control"
                                           ng-model="ui.book.title"
                                           id="txtTitle"
                                           name="txtTitle"
                                           placeholder="insert a title"
                                           required />

                                    <div class="help-block"
                                         ng-if="ui.formSubmit.txtTitle.$touched && ui.formSubmit.txtTitle.$invalid"
                                         ng-messages="ui.formSubmit.txtTitle.$error">
                                        <div class="text-danger" ng-message="required">this field is required</div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-6 form-group-sm">
                                <label>Year</label>
                                <div ng-class="{ 'has-error': ui.formSubmit.txtYear.$touched && ui.formSubmit.txtYear.$invalid }">
                                    <input type="text"
                                           class="form-control"
                                           ng-model="ui.book.year"
                                           id="txtYear"
                                           name="txtYear"
                                           placeholder="insert a year"
                                           required />

                                    <div class="help-block"
                                         ng-if="ui.formSubmit.txtYear.$touched && ui.formSubmit.txtYear.$invalid"
                                         ng-messages="ui.formSubmit.txtYear.$error">
                                        <div class="text-danger" ng-message="required">this field is required</div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <div class="row">
                            <div class="col-md-12 form-group-sm">
                                <div ng-class="{ 'has-error': ui.formSubmit.txtDescription.$touched && ui.formSubmit.txtDescription.$invalid }">
                                    <label>Description</label>
                                    <textarea type="text"
                                              class="form-control"
                                              ng-model="ui.book.description"
                                              id="txtDescription"
                                              name="txtDescription"
                                              placeholder="insert a description"
                                              required></textarea>

                                    <div class="help-block"
                                         ng-if="ui.formSubmit.txtDescription.$touched && ui.formSubmit.txtDescription.$invalid"
                                         ng-messages="ui.formSubmit.txtDescription.$error">
                                        <div class="text-danger" ng-message="required">this field is required</div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </fieldset>

            </form>

            <fieldset>
                <div class="well">
                    <legend>Data authors</legend>
                    <div class="row">
                        <div class="col-md-4 form-group-sm">
                            <label>Author</label>
                            <input type="text"
                                   class="form-control"
                                   ng-model="ui.author.name"
                                   id="txtAuthorName"
                                   name="txtAuthorName"
                                   placeholder="insert a name" />
                        </div>
                        <div class="col-md-4 form-group-sm">
                            <label>Nationality</label>
                            <input type="text"
                                   class="form-control"
                                   ng-model="ui.author.nationality"
                                   id="txtAuthorNationality"
                                   name="txtAuthorNationality"
                                   placeholder="insert a nationality" />
                        </div>
                        <div class="col-md-4 form-group-sm">
                            <button type="button" class="btn btn-primary btn-sm" ng-click="fx.addAuthor()">
                                <i class="fas fa-user-plus"></i> add author
                            </button>
                        </div>
                    </div>

                </div>
            </fieldset>

      

            <div class="row">
                <div class="col-md-12 form-group-sm">
                    <table class="table table-striped table-hover table-bordered">
                        <thead>
                            <tr>
                                <th>name</th>
                                <th>nationality</th>
                                <th>action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in ui.book.authors">
                                <td>{{item.name}}</td>
                                <td>{{item.nationality}}</td>
                                <td><button type="button" class="btn btn-danger btn-sm" ng-click="fx.dropAuthor(item)">delete</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>



        </fieldset>



    </div>
</div>

